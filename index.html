<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Freedman's Digital Library</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;800&display=swap" rel="stylesheet">
    <style>
        body {
             background-color: #161320; /* Deep Space Purple */
             color: #D9D1E9; /* Light Lavender-Gray */
             font-family: 'Inter', sans-serif;
        }
        
        /* Drifting Noise Background */
        body::before {
            content: '';
            position: fixed;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            z-index: -1;
            /* The base color is already on the body, so this layer is just for the noise texture */
            background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 600 600"><filter id="n"><feTurbulence type="fractalNoise" baseFrequency="0.75" numOctaves="3" stitchTiles="stitch"/></filter><rect width="100%" height="100%" filter="url(%23n)" opacity="0.07"/></svg>');
            animation: noiseAnimation 40s linear infinite;
        }

        @keyframes noiseAnimation {
            0% { transform: translate(0, 0); }
            25% { transform: translate(-10%, 10%); }
            50% { transform: translate(10%, -10%); }
            75% { transform: translate(-5%, 5%); }
            100% { transform: translate(0, 0); }
        }

        .book-cover {
            width: 160px;
            height: 240px;
            object-fit: cover;
            border-radius: 4px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4);
            transition: transform 0.3s ease;
        }
        .book-cover:hover {
            transform: scale(1.05);
        }
        /* Subtle On-Hover Scrollbar */
        .horizontal-scroll {
            /* For Firefox */
            scrollbar-width: thin;
            scrollbar-color: transparent transparent; 
            transition: scrollbar-color 0.3s ease-out;
        }
        .horizontal-scroll:hover {
            scrollbar-color: #4A4458 #161320; /* Visible on hover */
        }
        /* For Chrome, Safari, etc. */
        .horizontal-scroll::-webkit-scrollbar {
            height: 8px;
        }
        .horizontal-scroll::-webkit-scrollbar-track {
            background: transparent;
        }
        .horizontal-scroll::-webkit-scrollbar-thumb {
            background-color: transparent; /* Hidden by default */
            border-radius: 4px;
            transition: background-color 0.3s ease-out;
        }
        .horizontal-scroll:hover::-webkit-scrollbar-thumb {
            background-color: #4A4458; /* Visible on hover */
        }
    </style>
</head>
<body class="antialiased">

    <div class="container mx-auto px-4 sm:px-6 lg:px-8 py-12">
        <header class="text-center mb-8">
            <h1 class="text-5xl font-extrabold uppercase tracking-wider">
                The Freedman's<br>Digital Library
            </h1>
            <div class="max-w-3xl mx-auto text-lg mt-8">
                <p class="italic text-gray-300">"The race will free itself from exploiters just as soon as it decides to do so. No one else can accomplish this task for the race. It must plan and do for itself."</p>
                <p class="text-sm text-gray-500 mt-2">- Dr. Carter G. Woodson: Son of Freedmen, Father of African History, Founder of Black History Month.</p>
                <p class="text-gray-400 mt-6">At a time where our distinct African-American history is actively being erased or worse, deracinated, it's imperative that it be preserved. This collection of public domain and otherwise obscure digital items is the collective effort of a young ethnicity founded in the West.</p>
            </div>
        </header>

        <main id="library-content">
            <!-- Book content will be rendered here by JavaScript -->
        </main>

        <footer class="text-center mt-8 py-6 border-t border-gray-800">
            <p class="text-gray-500">
                MADE BY <a href="https://www.harad.tech" target="_blank" rel="noopener noreferrer" class="hover:text-[#A35FFF] transition-colors">HARAD</a>, 2025 |
                <a href="https://lowendjoe.github.io/NovumAethiopes/" class="mx-2 hover:text-[#A35FFF] transition-colors" aria-label="Novum Aethiopes"><i class="fa-solid fa-paintbrush"></i></a>
                <a href="https://lowendjoe.github.io/Sepia/" class="mx-2 hover:text-[#A35FFF] transition-colors" aria-label="Sepia"><i class="fa-solid fa-film"></i></a>
                <a href="https://lowendjoe.github.io/SongsOfOurFathers/" class="mx-2 hover:text-[#A35FFF] transition-colors" aria-label="Songs Of Our Fathers"><i class="fa-solid fa-music"></i></a>
            </p>
        </footer>
    </div>

    <script>
        // --- CONFIGURATION ---
        const R2_BUCKET_URL = "https://library.harad.tech";
        const PDF_SUBFOLDER = "Library";

        // --- DATA ---
        const libraryData = [
            {
                category: "Adventure & War",
                books: [
                    { title: "A Negro Explorer at the North Pole", author: "Matthew Alexander Henson", filename: "A Negro Explorer at the North Pole by Matthew Alexander Henson.pdf" },
                    { title: "Narrative of a Journey to Musardu", author: "Benjamin Anderson", filename: "Narrative of a Journey to Musardu, the Capital of the Western Mandingoes by Benjamin Anderson.pdf"},
                    { title: "The Black Phalanx", author: "Joseph T. Wilson", filename: "The Black Phalanx by Joseph T. Wilson.pdf" },
                    { title: "The Life and Adventures of Nat Love", author: "Nat Love", filename: "The Life and Adventures of Nat Love by Nat Love.pdf" },
                    { title: "The Negro as a soldier", author: "Christian A. Fleetwood", filename: "The Negro as a soldier by Christian A. Fleetwood.pdf" },
                ]
            },
            {
                category: "Arts & Crafts",
                books: [
                    { title: "Domestic Cook Book", author: "Malinda Russell", filename: "Domestic Cook Book by Malinda Russell.pdf" },
                    { title: "Fire!!", author: "Various", filename: "Fire!.pdf" },
                    { title: "The Negro in Literature and Art", author: "Benjamin Griffith Brawley", filename: "The Negro in Literature and Art in the United States by Benjamin Griffith Brawley.pdf" },
                    { title: "The New Negro An Interpretation", author: "Alain Locke (Editor)", filename: "The New Negro An Interpretation edited by Alain Locke.pdf" },
                ]
            },
            {
                category: "Before Liberation",
                books: [
                    { title: "Narrative of Henry Bibb", author: "Henry Bibb", filename: "Narrative of the Life and Adventures of Henry Bibb, an American Slave, Written by Himself.pdf" },
                    { title: "Narrative of Frederick Douglass", author: "Frederick Douglass", filename: "Narrative of the Life of Frederick Douglass, an American Slave.pdf" },
                    { title: "Reminiscences of My Life in Camp", author: "Susie King Taylor", filename: "Reminiscences of My Life in Camp by Susie King Taylor.pdf" },
                    { title: "Twelve Years a Slave", author: "Solomon Northup", filename: "Twelve Years a Slave by Solomon Northup.pdf" },
                    { title: "Up from Slavery", author: "Booker T. Washington", filename: "Up from Slavery by Booker T. Washington.pdf" },
                ]
            },
            {
                category: "Fiction",
                books: [
                    { title: "Our Nig", author: "Harriet E. Wilson", filename: "Our Nig; or, Sketches from the Life of a Free Black by Harriet E. Wilson.pdf" },
                    { title: "The Conjure Woman", author: "Charles W. Chesnutt", filename: "The Conjure Woman by Charles W. Chesnutt.pdf" },
                    { title: "The Eatonville Anthology", author: "Zora Neale Hurston", filename: "The Eatonville Anthology by Zora Neale Hurston.pdf" },
                    { title: "The Homesteader", author: "Oscar Micheaux", filename: "The Homesteader by Oscar Micheaux.pdf" },
                    { title: "There is confusion", author: "Jessie Redmon Fauset", filename: "There is confusion by Jessie Redmon Fauset.pdf" },
                ]
            },
            {
                category: "Folklore & Culture",
                books: [
                    { title: "Cudjo's Own Story", author: "Zora Neale Hurston", filename: "Cudjo's Own Story of the Last African Slaver by Zora Neale Hurston.pdf" },
                    { title: "Folk song of the American Negro", author: "John Wesley Work", filename: "Folk song of the American Negro by John Wesley Work.pdf" },
                    { title: "Negro Folk Rhymes", author: "Thomas Washington Talley", filename: "Negro Folk Rhymes by Thomas Washington Talley.pdf" },
                    { title: "The book of American Negro spirituals", author: "James Weldon Johnson", filename: "The book of American Negro spirituals by James Weldon Johnson.pdf" },
                    { title: "The History of the Negro Church", author: "Carter G. Woodson", filename: "The History of the Negro Church by Carter G. Woodson.pdf" },
                ]
            },
            {
                category: "Nationalism",
                books: [
                    { title: "A Soldier's Story", author: "Kuwasi Balgoon", filename: "A Soldier's Story by Kuwasi Balgoon.pdf" },
                    { title: "Negroes with Guns", author: "Robert F. Williams", filename: "Negroes with Guns by Robert F. Williams.pdf" },
                    { title: "The Conservation of Races", author: "W. E. B. Du Bois", filename: "The Conservation of Races by W. E. B. Du Bois.pdf" },
                    { title: "The Education of the Negro Prior to 1861", author: "Carter Godwin Woodson", filename: "The Education of the Negro Prior to 1861 by Carter Godwin Woodson.pdf" },
                    { title: "The Negro in the American rebellion", author: "William Wells Brown", filename: "The Negro in the American rebellion by William Wells Brown.pdf" },
                ]
            },
            {
                category: "Poetry",
                books: [
                    { title: "Poems on various subjects", author: "Phillis Wheatley", filename: "Poems on various subjects, religious and moral by Phillis Wheatley.pdf" },
                    { title: "The Book of American Negro Poetry", author: "James Weldon Johnson", filename: "The Book of American Negro Poetry by James Weldon Johnson.pdf" },
                    { title: "The Complete Poems", author: "Paul Laurence Dunbar", filename: "The Complete Poems of Paul Laurence Dunbar.pdf" },
                    { title: "The weary blues", author: "Langston Hughes", filename: "The weary blues by Langston Hughes.pdf" },
                ]
            }
        ];

        // --- GENERATIVE ART SYSTEM ---
        const cyrb53 = (str, seed = 0) => {
            let h1 = 0xdeadbeef ^ seed, h2 = 0x41c6ce57 ^ seed;
            for (let i = 0, ch; i < str.length; i++) {
                ch = str.charCodeAt(i);
                h1 = Math.imul(h1 ^ ch, 2654435761);
                h2 = Math.imul(h2 ^ ch, 1597334677);
            }
            h1 = Math.imul(h1 ^ (h1 >>> 16), 2246822507) ^ Math.imul(h2 ^ (h2 >>> 13), 3266489909);
            h2 = Math.imul(h2 ^ (h2 >>> 16), 2246822507) ^ Math.imul(h1 ^ (h1 >>> 13), 3266489909);
            return 4294967296 * (2097151 & h2) + (h1 >>> 0);
        };
        
        const colorPalettes = [
            { bg: '#161320', fg: '#D9D1E9', accent: '#A35FFF' }, // Deep Purple, Lavender, Violet
            { bg: '#D9D1E9', fg: '#161320', accent: '#A35FFF' }, // Lavender, Deep Purple, Violet
            { bg: '#2A2438', fg: '#D9D1E9', accent: '#5C5470' }, // Darker Purple, Lavender, Muted Purple
            { bg: '#A35FFF', fg: '#FFFFFF', accent: '#161320' }, // Violet, White, Deep Purple
            { bg: '#000000', fg: '#A35FFF', accent: '#FFFFFF' }, // Black, Violet, White
        ];

        const geometricElements = [
             // Overlapping circles
            ` <circle cx="100" cy="120" r="70" fill="{accent}" fill-opacity="0.7" />
               <circle cx="100" cy="200" r="70" fill="{fg}" fill-opacity="0.7" />`,
            // Large central circle
            `<circle cx="100" cy="180" r="80" fill="{fg}" />`,
            // Bar graph / chart
            `<g stroke="{fg}" stroke-width="2">
                <path d="M 40 250 L 40 150" /> <path d="M 80 250 L 80 120" />
                <path d="M 120 250 L 120 180" /> <path d="M 160 250 L 160 200" />
                <rect x="30" y="250" width="140" height="10" fill="{fg}" stroke="none" />
             </g>`,
            // Concentric circles (Op-art)
            `<g fill="none" stroke="{fg}" stroke-width="3">${[...Array(10)].map((_, i) => `<circle cx="100" cy="200" r="${10 + i * 10}" />`).join('')}</g>`,
            // Perspective grid
            `<g fill="none" stroke="{fg}" stroke-width="2">${[...Array(10)].map((_, i) => `<path d="M ${20 + i * 16} 100 L 100 280" />`).join('')}
                <path d="M 20 100 H 180" /> <path d="M 40 130 H 160" /> <path d="M 60 160 H 140" />
             </g>`,
             // Wavy lines
            `<path d="M 0 120 C 50 80, 150 160, 200 120" stroke="{fg}" stroke-width="15" fill="none" />
             <path d="M 0 180 C 50 140, 150 220, 200 180" stroke="{accent}" stroke-width="15" fill="none" />
             <path d="M 0 240 C 50 200, 150 280, 200 240" stroke="{fg}" stroke-width="15" fill="none" />`,
             // American flag abstraction
             `<rect x="20" y="100" width="160" height="120" fill="{fg}" /><g fill="{bg}">${[...Array(5)].map((_, i) => `<rect x="20" y="${100 + i * 24}" width="160" height="12" />`).join('')}</g>
              <rect x="20" y="100" width="80" height="60" fill="{accent}" />`,
             // Torn paper effect
             `<path d="M 30 80 H 170 V 220 H 30 Z" fill="{accent}" />
              <path d="M 35 85 H 165 V 215 H 35 Z" fill="{fg}" stroke="{bg}" stroke-width="2" />`,
             // Simple horizontal rule
             `<rect x="20" y="145" width="160" height="10" fill="{fg}" />`,
             // Split color block
             `<rect x="0" y="0" width="200" height="150" fill="{fg}" /><rect x="0" y="150" width="200" height="150" fill="{accent}" />`,
        ];

        function createGenerativeCover(title, author, hashSeed) {
            const hash = cyrb53(title + author, hashSeed);
            const palette = colorPalettes[hash % colorPalettes.length];
            let elementSvg = geometricElements[hash % geometricElements.length];
            elementSvg = elementSvg.replace(/{bg}/g, palette.bg).replace(/{fg}/g, palette.fg).replace(/{accent}/g, palette.accent);

            const maxLineLength = 18;
            const words = title.split(' ');
            let lines = [];
            let currentLine = words[0];
            for (let i = 1; i < words.length; i++) {
                if (currentLine.length + words[i].length + 1 < maxLineLength) { currentLine += " " + words[i]; } 
                else { lines.push(currentLine); currentLine = words[i]; }
            }
            lines.push(currentLine);

            const titleTspans = lines.map((line, i) => `<tspan x="100" dy="${i === 0 ? 0 : '1.2em'}">${line}</tspan>`).join('');
            
            const svg = `
                <svg width="200" height="300" viewBox="0 0 200 300" xmlns="http://www.w3.org/2000/svg">
                    <rect width="100%" height="100%" fill="${palette.bg}" />
                    ${elementSvg}
                    <text x="100" y="40" text-anchor="middle" font-family="Inter, sans-serif" font-size="16" fill="${palette.fg}" font-weight="bold">${titleTspans}</text>
                    <text x="100" y="${40 + lines.length * 16 * 1.2 + 10}" text-anchor="middle" font-family="Inter, sans-serif" font-size="12" fill="${palette.fg}" opacity="0.8">${author}</text>
                </svg>
            `;
            return `data:image/svg+xml;base64,${btoa(svg)}`;
        }


        // --- RENDER FUNCTION ---
        function renderLibrary() {
            const libraryContent = document.getElementById('library-content');
            let fullHtml = '';
            libraryData.forEach((category, catIndex) => {
                const booksHtml = category.books.map((book, bookIndex) => {
                    const subfolderPath = PDF_SUBFOLDER ? `${PDF_SUBFOLDER}/` : '';
                    const pdfUrl = `${R2_BUCKET_URL}/${subfolderPath}${encodeURIComponent(book.filename)}`;
                    const coverSrc = createGenerativeCover(book.title, book.author, catIndex * 100 + bookIndex);

                    return `
                        <div class="flex flex-col items-center text-center w-40 flex-shrink-0">
                            <a href="${pdfUrl}" target="_blank" rel="noopener noreferrer">
                                <img src="${coverSrc}" alt="Cover for ${book.title}" class="book-cover">
                            </a>
                            <div class="mt-3">
                                <h3 class="font-bold text-sm leading-tight">${book.title}</h3>
                                <p class="text-xs text-gray-400 mt-1">${book.author}</p>
                            </div>
                        </div>
                    `;
                }).join('');
                
                fullHtml += `
                    <section class="mb-8">
                        <h2 class="text-2xl font-bold text-left mb-6 text-[#A35FFF]">${category.category}</h2>
                        <div class="flex space-x-6 py-4 overflow-x-auto horizontal-scroll">
                            ${booksHtml}
                        </div>
                    </section>
                `;
            });
            libraryContent.innerHTML = fullHtml;
        }

        // --- INITIALIZATION ---
        document.addEventListener('DOMContentLoaded', () => {
            renderLibrary();
        });
    </script>
</body>
</html>

